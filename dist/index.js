!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.DateRangePicker=e()}}(function(){return function e(t,n,a){function r(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n?n:e)},u,u.exports,e,t,n,a)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<a.length;s++)r(a[s]);return r}({1:[function(e,module,exports){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),a=e("./tools/element").create,r=moment(),i=function(){function e(n,r){t(this,e);var i=n.el,s=n.config,o=s.numberOfCalendars,l=s.lang,u=s.maxDate,c=s.minDate;this.el=a("div","drp-calendar"),this.parent=i,this.calNum=o,this.current=n.range?moment(n.range.start):n.date?moment(n.date):moment(),this.reload=r,this.lang=l,u&&(this.maxDate=u.add(1,"days").startOf("day")),c&&(this.minDate=c.startOf("day")),this.draw(),i.appendChild(this.el)}return n(e,[{key:"draw",value:function(e){e&&(this.current=moment(e)),moment.locale(this.lang||"zh-cn"),this.el.innerHTML="",this.month=[],this.current=this.current.subtract(Math.ceil(this.calNum/2),"month"),this.drawPointer();for(var t=0;t<this.calNum;t++)this.current=this.current.date(1).add(1,"month"),this.drawHeader(t),this.drawMonth(t)}},{key:"drawPointer",value:function(){var e=this,t=a("div","drp-right");t.addEventListener("click",function(){e.nextMonth()});var n=a("div","drp-left");n.addEventListener("click",function(){e.prevMonth()}),this.parent.appendChild(t),this.parent.appendChild(n)}},{key:"drawHeader",value:function(e){this.header=a("div","drp-header",this.current.format("MMM YYYY")),this.el.appendChild(this.header),this.drawWeekDays(),this.header.innerHTML=this.current.format("MMM YYYY")}},{key:"drawMonth",value:function(e){this.month.push(a("div","drp-month")),this.backFill(),this.currentMonth(),this.fowardFill(),this.el.appendChild(this.month[this.month.length-1])}},{key:"backFill",value:function(){var e=this.current.clone(),t=e.day();if(t){e.subtract(t+1,"days");for(var n=t;n>0;n--)this.drawDay(e.add(1,"days"))}}},{key:"fowardFill",value:function(){var e=this.current.clone().add(1,"months").subtract(1,"days"),t=e.day();if(6!==t)for(var n=t;6>n;n++)this.drawDay(e.add(1,"days"))}},{key:"currentMonth",value:function(){for(var e=this.current.clone();e.month()===this.current.month();)this.drawDay(e),e.add(1,"days")}},{key:"getWeek",value:function(e){this.week&&0!==e.day()||(this.week=a("div","drp-week"),this.month[this.month.length-1].appendChild(this.week))}},{key:"drawDay",value:function(e){this.getWeek(e);var t=a("div",this.getDayClass(e)),n="drp-day-number";(this.minDate&&e.isBefore(this.minDate)||this.maxDate&&e.isAfter(this.maxDate))&&(n="drp-day-static");var r=a("div",n,e.format("DD"));r.setAttribute("date",e.format("YYYY-MM-DD")),t.appendChild(r),this.week.appendChild(t)}},{key:"getDayClass",value:function(e){var t=["drp-day"];return e.month()!==this.current.month()?t.push("drp-other"):r.isSame(e,"day")&&t.push("drp-today"),t.join(" ")}},{key:"drawWeekDays",value:function(e){var t=this;this.weekDays=a("div","drp-week-days");for(var n=[],r=0;7>r;r++)n.push(moment().weekday(r-1).format("ddd"));n.forEach(function(e){var n=a("span","drp-day",e);t.weekDays.appendChild(n)}),this.el.appendChild(this.weekDays)}},{key:"nextMonth",value:function(){this.current.subtract(Math.floor(this.calNum/2)-1,"months"),this.next=!0,this.draw(),this.reload()}},{key:"prevMonth",value:function(){this.current.subtract(Math.floor(this.calNum/2)+1,"months"),this.next=!1,this.draw(),this.reload()}}]),e}();module.exports=i},{"./tools/element":6}],2:[function(e,module,exports){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),a=e("./tools/element").create,r=e("./tools/getter"),i=r.zero,s=function(){function e(n){t(this,e);var a=n.el,r=n.config,i=n.selectFunc;this.el=a,this.config=r,this.selectFunc=i,this.hours=[],this.minutes=[],this.timeText=null,this.secondTimeText=null,this.input=[],this.init(n)}return n(e,[{key:"init",value:function(e){var t=this.config.type,n=a("div","drp-time");this.timeText=a("div","drp-time-text");var r=moment(i);if("single"===t)n.appendChild(this.timeText),n.appendChild(this.createInput(!0,e.date||r)),n.appendChild(this.createInput(!1,e.date||r));else if("range"===t||"terminal"===t){this.secondTimeText=a("div","drp-time-text");var s=e.range?e.range.start:r,o=e.range?e.range.end:r;n.appendChild(this.insertItemBox(this.timeText,this.createInput(!0,s,!0),this.createInput(!1,s,!0))),n.appendChild(this.insertItemBox(this.secondTimeText,this.createInput(!0,o,!1),this.createInput(!1,o,!1)))}this.el.appendChild(n)}},{key:"insertItemBox",value:function(e,t,n){var r=a("div","drp-time-item");return r.appendChild(e),r.appendChild(t),r.appendChild(n),r}},{key:"createInput",value:function(e,t,n){var r=this,i=a("input","drp-time-input");return i.type="range",i.min=0,i.max=e?23:59,this.input.push(i),this.setParams(e,t,n),i.addEventListener("input",function(a){t=e?t.hours(a.target.value):t.minutes(a.target.value),r.setParams(e,t,n),r.selectFunc(null)}),i}},{key:"setParams",value:function(e,t,n){var a=this.config.type;"single"===a?(this.timeText.innerHTML=t.format("LT"),e?this.input[0].value=this.hours[0]=t.format("HH"):this.input[1].value=this.minutes[0]=t.format("mm")):("range"===a||"terminal"===a)&&(n?(this.timeText.innerHTML=t.format("LT"),e?this.input[0].value=this.hours[0]=t.format("HH"):this.input[1].value=this.minutes[0]=t.format("mm")):(this.secondTimeText.innerHTML=t.format("LT"),e?this.input[2].value=this.hours[1]=t.format("HH"):this.input[3].value=this.minutes[1]=t.format("mm")))}},{key:"setTime",value:function(e){var t=this.config.type;"single"===t?(this.setParams(!0,e),this.setParams(!1,e)):("range"===t||"terminal"===t)&&(this.setParams(!0,e.start,!0),this.setParams(!1,e.start,!0),this.setParams(!0,e.end,!1),this.setParams(!1,e.end,!1))}}]),e}();module.exports=s},{"./tools/element":6,"./tools/getter":8}],3:[function(e,module,exports){"use strict";module.exports=function(e,t,n){e.target.className.split(" ").forEach(function(a){"function"==typeof t[a]&&t[a](e.target,n)})}},{}],4:[function(e,module,exports){"use strict";var t=e("./../tools/getElementsByAttribute"),n=e("./../tools/element"),a=e("./../tools/getter");module.exports={reload:function(e,t){var r=(e.date,e.range,e.config),i=(e.rangeElements,e.interval,e.el),s=e.firstItem,o=e.targetElements;switch(r.type){case"single":t&&(e.range=null),e.date&&(e.targetElements=n.exchangeClass(o,a.format(e.date),i,["focus"]));break;case"range":t&&(e.date=null),e.range&&(e.rangeElements=n.choose(e.rangeElements,a.format(e.range.start),a.format(e.range.end),i,s));break;case"terminal":t&&(e.date=null,e.interval=e.range.diff("days")),e.range&&(e.rangeElements=n.choose(e.rangeElements,a.format(e.range.start),a.format(e.range.end),i))}},click:{"drp-day-number":function(e,r){var i=r.range,s=r.config,o=r.rangeElements,l=r.el,u=r.firstItem,c=r.targetElements,h=r.interval,f=r.selectFunc,m=s.maxDate,d=s.minDate,g=a.getDate(e),p=moment(g);if(h){if(m){var v=moment(m).subtract(h,"days");p.isAfter(v)&&(p=v,g=a.format(p),u=a.format(moment(m)))}if(d){var y=moment(d);p.isBefore(y)&&(p=y,g=a.format(p),u=a.format(moment(p).add(h,"days")))}}m&&p.isAfter(m)||d&&p.isBefore(d)||("single"===s.type?(r.date=p,f&&f(r.date),r.targetElements=n.exchangeClass(c,g,l,["focus"])):"range"===s.type?u?(r.range=moment(u).isBefore(g)?moment.range([u,g]):moment.range([g,u]),n.exChange(o),f&&f(r.range),r.firstItem=null):(n.clear(l,i),r.firstItem=g,r.targetElements=n.exchangeClass(c,g,l,["active"]),g=t(l,"date",r.firstItem),r.rangeElements=[g,[],g]):"terminal"===s.type&&(i&&n.clear(l,i),r.range=moment.range([g,u]),n.exChange(o),f&&f(r.range),r.firstItem=null))}},hover:{"drp-day-number":function(e,r){var i=(r.range,r.config),s=r.rangeElements,o=r.el,l=r.firstItem,u=(r.targetElements,r.interval),c=i.maxDate,h=i.minDate,f=a.getDate(e);if(c){var m=u?moment(c).subtract(u,"days"):moment(c);moment(f).isAfter(m)&&(f=a.format(m))}h&&moment(f).isBefore(h)&&(f=a.format(moment(h)));var d=u?moment(f).add(u,"days"):moment(f);o&&(t(o,"date",f).forEach(function(t){t!==e&&(t.classList.add("hover"),e.addEventListener("mouseout",function(){t.classList.remove("hover")}))}),"range"===i.type&&l&&(moment(l).isBefore(f)?r.rangeElements=n.choose(s,l,f,o,l):r.rangeElements=n.choose(s,f,l,o,l)),"terminal"===i.type&&(r.firstItem=a.format(d),r.rangeElements=n.choose(s,f,r.firstItem,o,r.firstItem)))}},leave:function(e){var t=e.config,a=e.rangeElements,r=e.targetElements;("range"===t.type||"terminal"===t.type)&&(n.clearRange(a,r),e.rangeElements=[[],[],[]],e.targetElements=[],e.firstItem=null)}}},{"./../tools/element":6,"./../tools/getElementsByAttribute":7,"./../tools/getter":8}],5:[function(e,module,exports){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),a=e("./Calendar"),r=e("./TimePicker"),i=e("./events/bind"),s=e("./events/events"),o=s.click,l=s.hover,u=s.reload,c=s.leave,h=e("./tools/mouseleave"),f=e("./tools/element"),m=e("./tools/getter"),d=m.zero,g=function(){function e(n,a){var r=this;t(this,e);var i=a.type,s=a.date,o=a.range,l=a.onSelect,u=a.lang;a.lang=u=u||"zh-cn",this.el=n,this.config=a,this.targetElements=[],this.rangeElements=[[],[],[]],this.firstItem=null,this.range=o?function(){return o.start=o.start.locale(u),o.end=o.end.locale(u),o}():null,this.date=s?s.locale(u):null,this.interval=null,this.time=null,this.calendar=null,this.selectFunc=l?function(e){if(!r.time)return void l(e);var t=r.time,n=t.hours,a=t.minutes;"single"===i?(e=e||r.date,r.date=e.hours(n[0]).minutes(a[0]),l(r.date)):("range"===i||"terminal"===i)&&(e=e||r.range,r.range.start=e.start.hours(n[0]).minutes(a[0]),r.range.end=e.end.hours(n[1]).minutes(a[1]),l(r.range))}:null,this.init()}return n(e,[{key:"init",value:function(){var e=this,t=this.el,n=this.config;this.calendar=new a(this,function(){u(e)}),n.time&&(this.time=new r(this)),t.className="drp",t.addEventListener("click",function(t){i(t,o,e)}),t.addEventListener("mouseover",function(n){i(n,l,e),h.getTarget(t)||h.setTarget(t)}),h.add(t,function(){c(e)}),u(this,!0)}},{key:"set",value:function(e,t){if("undefined"!=typeof this[e]&&t){var n=this.config,a=n.type,r=(n.onSelect,n.lang);if("date"===e){if(this.date&&this.date.isSame(t))return;t=t.locale(r)}else if("range"===e||"terminal"===a){if(this.range&&this.range.isSame(t))return;t.start=t.start.locale(r),t.end=t.end.locale(r),"terminal"===a&&(this.interval=t.diff("days"))}this[e]=t,this.time&&this.time.setTime(t),this.calendar.draw(t.start||t),u(this)}}},{key:"clear",value:function(){var e=this.el,t=this.date,n=this.range;this.config;n&&(f.clear(e,n),this.range=null,this.time&&this.time.setTime(moment.range([d,d]))),t&&(f.exchangeClass(this.targetElements,"",e,["focus"]),this.date=null,this.time&&this.time.setTime(moment(d)))}}]),e}();module.exports=g},{"./Calendar":1,"./TimePicker":2,"./events/bind":3,"./events/events":4,"./tools/element":6,"./tools/getter":8,"./tools/mouseleave":9}],6:[function(e,module,exports){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var n=e("./getElementsByAttribute"),a=e("./getter"),r=a.classArr,i=a.classFunc,s=a.format,o=a.getDate,l=function(e,t){var n=!0;return t.forEach(function(t){e.classList.contains(t)||(n=!1)}),n},u=function(e,n){var a=e.classList;if(l(e,n)){var r=e.className.split(" ");n.forEach(function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}),a.contains("hover")&&3===r.length||!a.contains("hover")&&2===r.length?a.remove("active"):a.remove.apply(a,t(n))}};module.exports={hasChild:function(e,t){var n=!1,a=function r(e){e===t&&(n=!0),e.childNodes&&e.childNodes.length&&r(e.childNodes[0]),e.nextSibling&&r(e.nextSibling)};return a(e),n},create:function(e,t,n){var a=document.createElement(e);return t&&(a.className=t),n&&(a.innderText=a.textContent=n),a},choose:function(e,a,r,i,o){var l=[],u=[],c=[],h=moment.range(a,r);h.by("days",function(e){var o=n(i,"date",s(e));e.isAfter(a)?e.isBefore(r)?u.push.apply(u,t(o)):c.push.apply(c,t(o)):l.push.apply(l,t(o))});var f=[l,u,c];return e=this.change(e,f,o),l[0]===c[0]&&l.forEach(function(e){e.classList.add("start","end","segment")}),e},change:function(e,n,a){var s=null;return e.forEach(function(e,t){s=i(a,r[t]).split(" "),e.forEach(function(e){u(e,s)})}),n.forEach(function(n,o){s=i(a,r[o]).split(" "),n.forEach(function(n){if(!l(n,s)||e[0]===e[2]){var a;(a=n.classList).add.apply(a,t(s))}})}),n},clear:function(e,t){var a=null,i=null,o=null,l=moment.range([moment(t.start),moment(t.end)]);l.start.set({hour:0,minute:0,second:0}),l.by("days",function(t){switch(o=s(t)){case s(l.start):a=0;break;case s(l.end):a=2;break;default:a=1}i=n(e,"date",o),i.forEach(function(e){e.classList.remove("focus",r[a])})})},clearRange:function(e,t){e.forEach(function(e,t){e.forEach(function(e){u(e,["active",r[t]])})}),t.forEach(function(e){u(e,["active"])})},exChange:function(e){return e.forEach(function(e,t){e.forEach(function(e){e.classList.remove("active"),e.classList.add("focus",r[t])})}),e},exchangeClass:function(e,t,a,r){return r=r||"",e.forEach(function(e){o(e)!==t&&e&&u(e,r)}),e=[],n(a,"date",t).forEach(function(t){t.classList.add(r),e.push(t)}),e}}},{"./getElementsByAttribute":7,"./getter":8}],7:[function(e,module,exports){"use strict";var t=function(e,t,n){return Array.prototype.slice.call(e.querySelectorAll("["+t+"='"+n+"']"))};module.exports=t},{}],8:[function(e,module,exports){"use strict";module.exports={classArr:["start","segment","end"],getDate:function(e){return e.getAttribute("date")},format:function(e){return e.format("YYYY-MM-DD")},classFunc:function(e,t){return(e?"active ":"focus ")+t},zero:"2000-01-01 00:00"}},{}],9:[function(e,module,exports){"use strict";var t=e("./element").hasChild,n=null,a=[];document.body.addEventListener("mouseover",function(e){n&&!t(n,e.target)&&(a.forEach(function(e){n===e.el&&e.callback()}),n=null)}),module.exports={add:function(e,t){a.push({el:e,callback:t})},getTarget:function(){return n},setTarget:function(e){n=e}}},{"./element":6}]},{},[5])(5)});